<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login - WasteWise Portal</title>
    <link rel="stylesheet" href="../css/main.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<script type="module" src="https://static.rocket.new/rocket-web.js?_cfg=https%3A%2F%2Fwastewise9252back.builtwithrocket.new&_be=https%3A%2F%2Fapplication.rocket.new&_v=0.1.8"></script>
</head>
<body class="bg-background min-h-screen">
    <!-- Header Section -->
    <header class="bg-surface shadow-civic border-b border-border-light">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Logo -->
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-primary rounded-lg flex items-center justify-center">
                        <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M19 7h-3V6a4 4 0 0 0-8 0v1H5a1 1 0 0 0-1 1v11a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V8a1 1 0 0 0-1-1zM10 6a2 2 0 0 1 4 0v1h-4V6zm8 13a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V9h2v1a1 1 0 0 0 2 0V9h4v1a1 1 0 0 0 2 0V9h2v10z"/>
                        </svg>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold text-text-primary">WasteWise Portal</h1>
                        <p class="text-xs text-text-secondary">Digital Waste Management</p>
                    </div>
                </div>

                <!-- Language Selector -->
                <div class="flex items-center space-x-4">
                    <select id="languageSelect" class="form-input text-sm py-2 px-3 min-h-0 w-auto">
                        <option value="en">English</option>
                        <option value="hi">हिंदी</option>
                        <option value="mr">मराठी</option>
                        <option value="gu">ગુજરાતી</option>
                        <option value="ta">தமிழ்</option>
                    </select>
                    <button id="audioToggle" class="touch-target text-text-secondary hover:text-primary transition-civic">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-1 flex items-center justify-center px-4 py-8">
        <div class="w-full max-w-md">
            <!-- Login Card -->
            <div class="card p-8 space-y-6">
                <!-- Welcome Section -->
                <div class="text-center space-y-2">
                    <div class="w-16 h-16 bg-primary-50 rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg class="w-8 h-8 text-primary" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                        </svg>
                    </div>
                    <h2 class="text-2xl font-bold text-text-primary">Welcome Back</h2>
                    <p class="text-text-secondary">Secure login to WasteWise Portal</p>
                </div>

                <!-- Authentication Form -->
                <form id="loginForm" class="space-y-6">
                    <!-- Phone Number Input -->
                    <div id="phoneSection">
                        <label for="phoneNumber" class="form-label">Mobile Number</label>
                        <div class="relative">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <span class="text-text-secondary text-sm">+91</span>
                            </div>
                            <input type="tel" id="phoneNumber" class="form-input pl-12" placeholder="9876543210" maxlength="10" pattern="[0-9]{10}" required />
                        </div>
                        <p class="text-xs text-text-secondary mt-1">We'll send you an OTP for verification</p>
                    </div>

                    <!-- OTP Section (Initially Hidden) -->
                    <div id="otpSection" class="hidden space-y-4">
                        <div>
                            <label for="otpInput" class="form-label">Enter OTP</label>
                            <input type="text" id="otpInput" class="form-input text-center text-lg tracking-widest" placeholder="123456" maxlength="6" pattern="[0-9]{6}" />
                        </div>
                        <div class="flex justify-between items-center text-sm">
                            <span class="text-text-secondary">Didn't receive OTP?</span>
                            <button type="button" id="resendOtp" class="text-primary hover:text-primary-600 font-medium disabled:opacity-50" disabled>
                                Resend in <span id="timer">30</span>s
                            </button>
                        </div>
                    </div>

                    <!-- Role Selection (Initially Hidden) -->
                    <div id="roleSection" class="hidden space-y-4">
                        <label class="form-label">Select Your Role</label>
                        <div class="grid grid-cols-1 gap-3">
                            <label class="flex items-center p-4 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-civic">
                                <input type="radio" name="role" value="citizen" class="sr-only" />
                                <div class="w-5 h-5 border-2 border-gray-300 rounded-full mr-3 flex items-center justify-center">
                                    <div class="w-2 h-2 bg-primary rounded-full hidden"></div>
                                </div>
                                <div class="flex-1">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-8 h-8 bg-primary-50 rounded-lg flex items-center justify-center">
                                            <svg class="w-4 h-4 text-primary" fill="currentColor" viewBox="0 0 24 24">
                                                <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                                            </svg>
                                        </div>
                                        <div>
                                            <p class="font-medium text-text-primary">Citizen</p>
                                            <p class="text-sm text-text-secondary">Access waste management services</p>
                                        </div>
                                    </div>
                                </div>
                            </label>
                            <label class="flex items-center p-4 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-civic">
                                <input type="radio" name="role" value="worker" class="sr-only" />
                                <div class="w-5 h-5 border-2 border-gray-300 rounded-full mr-3 flex items-center justify-center">
                                    <div class="w-2 h-2 bg-primary rounded-full hidden"></div>
                                </div>
                                <div class="flex-1">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-8 h-8 bg-secondary-50 rounded-lg flex items-center justify-center">
                                            <svg class="w-4 h-4 text-secondary" fill="currentColor" viewBox="0 0 24 24">
                                                <path d="M20 6h-2.18c.11-.31.18-.65.18-1a2.996 2.996 0 0 0-5.5-1.65l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1z"/>
                                            </svg>
                                        </div>
                                        <div>
                                            <p class="font-medium text-text-primary">Worker</p>
                                            <p class="text-sm text-text-secondary">Manage collection tasks</p>
                                        </div>
                                    </div>
                                </div>
                            </label>
                            <label class="flex items-center p-4 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-civic">
                                <input type="radio" name="role" value="admin" class="sr-only" />
                                <div class="w-5 h-5 border-2 border-gray-300 rounded-full mr-3 flex items-center justify-center">
                                    <div class="w-2 h-2 bg-primary rounded-full hidden"></div>
                                </div>
                                <div class="flex-1">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-8 h-8 bg-accent-50 rounded-lg flex items-center justify-center">
                                            <svg class="w-4 h-4 text-accent" fill="currentColor" viewBox="0 0 24 24">
                                                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                                            </svg>
                                        </div>
                                        <div>
                                            <p class="font-medium text-text-primary">Administrator</p>
                                            <p class="text-sm text-text-secondary">System management & analytics</p>
                                        </div>
                                    </div>
                                </div>
                            </label>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="space-y-3">
                        <button type="submit" id="primaryButton" class="btn-primary w-full">
                            Send OTP
                        </button>

                        <!-- Aadhaar eKYC Option -->
                        <div id="aadhaarSection" class="text-center">
                            <div class="relative">
                                <div class="absolute inset-0 flex items-center">
                                    <div class="w-full border-t border-gray-300"></div>
                                </div>
                                <div class="relative flex justify-center text-sm">
                                    <span class="px-2 bg-surface text-text-secondary">or</span>
                                </div>
                            </div>
                            <button type="button" id="aadhaarLogin" class="mt-3 w-full bg-surface border border-gray-300 text-text-primary py-3 px-4 rounded-lg hover:bg-gray-50 transition-civic flex items-center justify-center space-x-2">
                                <svg class="w-5 h-5 text-accent" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
                                </svg>
                                <span>Login with Aadhaar eKYC</span>
                            </button>
                        </div>
                    </div>
                </form>

                <!-- Trust Signals -->
                <div class="pt-6 border-t border-gray-200">
                    <div class="text-center space-y-3">
                        <p class="text-xs text-text-secondary">Secured by Government of India</p>
                        <div class="flex justify-center items-center space-x-4">
                            <div class="flex items-center space-x-2">
                                <div class="w-6 h-6 bg-primary rounded flex items-center justify-center">
                                    <svg class="w-4 h-4 text-white" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"/>
                                    </svg>
                                </div>
                                <span class="text-xs text-text-secondary">SSL Secured</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <div class="w-6 h-6 bg-accent rounded flex items-center justify-center">
                                    <svg class="w-4 h-4 text-white" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                    </svg>
                                </div>
                                <span class="text-xs text-text-secondary">Verified Portal</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Privacy Notice -->
            <div class="mt-6 text-center">
                <p class="text-xs text-text-secondary">
                    By continuing, you agree to our 
                    <a href="javascript:void(0)" class="text-primary hover:text-primary-600">Terms of Service</a> 
                    and 
                    <a href="javascript:void(0)" class="text-primary hover:text-primary-600">Privacy Policy</a>
                </p>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-surface border-t border-border-light py-6">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center space-y-2">
                <p class="text-sm text-text-secondary">
                    © 2025 WasteWise Portal. All Rights Reserved.
                </p>
                <div class="flex justify-center items-center space-x-6 text-xs text-text-secondary">
                    <a href="javascript:void(0)" class="hover:text-primary transition-civic">Help Center</a>
                    <a href="javascript:void(0)" class="hover:text-primary transition-civic">Contact Support</a>
                    <a href="javascript:void(0)" class="hover:text-primary transition-civic">System Status</a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Login Form Logic
        document.addEventListener('DOMContentLoaded', function() {
            const loginForm = document.getElementById('loginForm');
            const phoneSection = document.getElementById('phoneSection');
            const otpSection = document.getElementById('otpSection');
            const roleSection = document.getElementById('roleSection');
            const primaryButton = document.getElementById('primaryButton');
            const phoneInput = document.getElementById('phoneNumber');
            const otpInput = document.getElementById('otpInput');
            const resendButton = document.getElementById('resendOtp');
            const timerSpan = document.getElementById('timer');
            const roleInputs = document.querySelectorAll('input[name="role"]');
            
            let currentStep = 'phone'; // phone, otp, role, complete
            let timer = null;
            
            // Phone number validation
            phoneInput.addEventListener('input', function(e) {
                e.target.value = e.target.value.replace(/\D/g, '').slice(0, 10);
            });
            
            // OTP input validation
            otpInput.addEventListener('input', function(e) {
                e.target.value = e.target.value.replace(/\D/g, '').slice(0, 6);
            });
            
            // Role selection handling
            roleInputs.forEach(input => {
                input.addEventListener('change', function() {
                    // Update visual selection
                    roleInputs.forEach(radio => {
                        const indicator = radio.parentElement.querySelector('.w-2');
                        if (radio.checked) {
                            indicator.classList.remove('hidden');
                            radio.parentElement.classList.add('border-primary', 'bg-primary-50');
                            radio.parentElement.classList.remove('border-gray-200');
                        } else {
                            indicator.classList.add('hidden');
                            radio.parentElement.classList.remove('border-primary', 'bg-primary-50');
                            radio.parentElement.classList.add('border-gray-200');
                        }
                    });
                    
                    // Enable login button
                    primaryButton.disabled = false;
                    primaryButton.textContent = 'Login to Dashboard';
                });
            });
            
            // Form submission
            loginForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                if (currentStep === 'phone') {
                    const phone = phoneInput.value;
                    if (phone.length === 10) {
                        // Simulate OTP sending
                        phoneSection.classList.add('hidden');
                        otpSection.classList.remove('hidden');
                        primaryButton.textContent = 'Verify OTP';
                        currentStep = 'otp';
                        startTimer();
                        otpInput.focus();
                    }
                } else if (currentStep === 'otp') {
                    const otp = otpInput.value;
                    if (otp.length === 6) {
                        // Simulate OTP verification (accept 123456 as valid)
                        if (otp === '123456') {
                            otpSection.classList.add('hidden');
                            roleSection.classList.remove('hidden');
                            primaryButton.textContent = 'Select Role';
                            primaryButton.disabled = true;
                            currentStep = 'role';
                        } else {
                            showError('Invalid OTP. Please try again.');
                        }
                    }
                } else if (currentStep === 'role') {
                    const selectedRole = document.querySelector('input[name="role"]:checked');
                    if (selectedRole) {
                        // Redirect based on role
                        const roleValue = selectedRole.value;
                        let redirectUrl = '';
                        
                        switch(roleValue) {
                            case 'citizen':
                                redirectUrl = 'citizen_dashboard.html';
                                break;
                            case 'worker':
                                redirectUrl = 'worker_dashboard.html';
                                break;
                            case 'admin':
                                redirectUrl = 'admin_dashboard.html';
                                break;
                        }
                        
                        // Store user session
                        localStorage.setItem('userRole', roleValue);
                        localStorage.setItem('userPhone', phoneInput.value);
                        localStorage.setItem('loginTime', new Date().toISOString());
                        
                        // Redirect
                        window.location.href = redirectUrl;
                    }
                }
            });
            
            // Resend OTP functionality
            resendButton.addEventListener('click', function() {
                if (!resendButton.disabled) {
                    startTimer();
                    showSuccess('OTP sent successfully!');
                }
            });
            
            // Timer function
            function startTimer() {
                let timeLeft = 30;
                resendButton.disabled = true;
                
                timer = setInterval(function() {
                    timeLeft--;
                    timerSpan.textContent = timeLeft;
                    
                    if (timeLeft <= 0) {
                        clearInterval(timer);
                        resendButton.disabled = false;
                        resendButton.innerHTML = 'Resend OTP';
                    }
                }, 1000);
            }
            
            // Aadhaar eKYC (placeholder)
            document.getElementById('aadhaarLogin').addEventListener('click', function() {
                showInfo('Aadhaar eKYC integration coming soon!');
            });
            
            // Audio toggle
            document.getElementById('audioToggle').addEventListener('click', function() {
                showInfo('Audio narration feature will be available soon!');
            });
            
            // Language selection
            document.getElementById('languageSelect').addEventListener('change', function() {
                showInfo('Language change will be implemented in the next update!');
            });
            
            // Utility functions
            function showError(message) {
                showNotification(message, 'error');
            }
            
            function showSuccess(message) {
                showNotification(message, 'success');
            }
            
            function showInfo(message) {
                showNotification(message, 'info');
            }
            
            function showNotification(message, type) {
                // Create notification element
                const notification = document.createElement('div');
                notification.className = `fixed top-4 right-4 p-4 rounded-lg shadow-civic-lg z-50 max-w-sm transition-civic ${
                    type === 'error' ? 'bg-red-50 text-red-700 border border-red-200' :
                    type === 'success' ? 'bg-green-50 text-green-700 border border-green-200' :
                    'bg-blue-50 text-blue-700 border border-blue-200'
                }`;
                notification.textContent = message;
                
                document.body.appendChild(notification);
                
                // Remove after 3 seconds
                setTimeout(() => {
                    notification.remove();
                }, 3000);
            }
        });
    </script>
<script id="dhws-dataInjector" src="../public/dhws-data-injector.js"></script>
</body>
</html>